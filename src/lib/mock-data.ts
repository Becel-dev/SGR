

import type { Risk, RecentActivity, BowtieData, BowtieThreat, BowtieConsequence, Control } from './types';

export const controlsData: Control[] = [
    {
        criadoEm: '2024-06-24',
        id: 1,
        codigoMUE: 'RUMO 01',
        titulo: 'RUMO 01-01',
        idRiscoMUE: 30,
        descricaoMUE: 'Incêndio e explosão em terminais (silos/ armazéns/ correias transportadoras)',
        nomeControle: 'Plano de Inspeção e Limpeza das Estruturas',
        tipo: 'Preventivo',
        classificacao: 'Procedimento',
        status: 'Implementação Futura',
        donoControle: 'Kaio Coutinho de Farias',
        emailDono: 'kaio.farias@rumolog.com',
        area: 'OPERAÇÃO',
        dataUltimaVerificacao: '2024-06-05',
        frequenciaMeses: 6,
        proximaVerificacao: '2024-12-02',
        validacao: 'DENTRO DO PRAZO',
        onePager: '01-01 Inspeção Limpeza',
        evidencia: '',
        criadoPor: 'Aluisio Fernando de Oliveira Filho',
        modificadoEm: '2024-08-26',
        modificadoPor: 'Victor Dimitri Zolotareff',
        preenchimentoKPI: 'CS337482@rumolog.com;RUBENS.ALENCAR@RUMOLOG.COM;CS264288@rumolog.com;kaio.farias@rumolog.com',
        gerenciaRisco: 'Operação',
        topRiskAssociado: 'Risco 01.Não integridade Operacional de Ativos',
        idRiscos: 30,
        criticidade: 'Sim',
    },
    {
        criadoEm: '2024-06-24',
        id: 2,
        codigoMUE: 'RUMO 01',
        titulo: 'RUMO 01-02',
        idRiscoMUE: 30,
        descricaoMUE: 'Incêndio e explosão em terminais (silos/ armazéns/ correias transportadoras)',
        nomeControle: 'SPDA - Aterramento dos Silos, Armazéns e Equipamentos',
        tipo: 'Preventivo',
        classificacao: 'Equipamento',
        status: 'Implementado com Pendência',
        donoControle: 'Pablo Lacerda Aguiar',
        emailDono: 'pablo.aguiar@rumolog.com',
        area: 'MANUTENÇÃO',
        dataUltimaVerificacao: '2024-06-10',
        frequenciaMeses: 12,
        proximaVerificacao: '2025-06-05',
        validacao: 'DENTRO DO PRAZO',
        onePager: '01-02 SPDA',
        evidencia: 'E-LDT-RMO-02202-001-00 - LAUDO ATERRAMENTO E SPDA TRO',
        criadoPor: 'Aluisio Fernando de Oliveira Filho',
        modificadoEm: '2024-08-26',
        modificadoPor: 'Victor Dimitri Zolotareff',
        preenchimentoKPI: 'CS337482@rumolog.com;pablo.aguiar@rumolog.com',
        gerenciaRisco: 'Operação',
        topRiskAssociado: 'Risco 01.Não integridade Operacional de Ativos',
        idRiscos: 30,
        criticidade: 'Sim',
    },
    {
        criadoEm: '2024-06-24',
        id: 3,
        codigoMUE: 'RUMO 01',
        titulo: 'RUMO 01-03',
        idRiscoMUE: 30,
        descricaoMUE: 'Incêndio e explosão em terminais (silos/ armazéns/ correias transportadoras)',
        nomeControle: 'Instalação elétrica adequada e classificação de área',
        tipo: 'Preventivo',
        classificacao: 'Equipamento',
        status: 'Implementação Futura',
        donoControle: 'Bruno Edison Silva Dalosto',
        emailDono: 'bruno.dalosto@rumolog.com',
        area: 'SEGURANÇA',
        dataUltimaVerificacao: '2024-06-03',
        frequenciaMeses: 6,
        proximaVerificacao: '2024-11-30',
        validacao: 'DENTRO DO PRAZO',
        onePager: '01-03 Área classificada',
        evidencia: '',
        criadoPor: 'Aluisio Fernando de Oliveira Filho',
        modificadoEm: '2024-08-26',
        modificadoPor: 'Victor Dimitri Zolotareff',
        preenchimentoKPI: 'CS337482@rumolog.com;CS306132@rumolog.com;bruno.dalosto@rumolog.com',
        gerenciaRisco: 'Operação',
        topRiskAssociado: 'Risco 01.Não integridade Operacional de Ativos',
        idRiscos: 30,
        criticidade: 'Sim',
    },
    {
        criadoEm: '2024-06-24',
        id: 4,
        codigoMUE: 'RUMO 01',
        titulo: 'RUMO 01-04',
        idRiscoMUE: 30,
        descricaoMUE: 'Incêndio e explosão em terminais (silos/ armazéns/ correias transportadoras)',
        nomeControle: 'Dispositivo de Supressão de Pó',
        tipo: 'Preventivo',
        classificacao: 'Equipamento',
        status: 'Não Implementado',
        donoControle: 'Pablo Lacerda Aguiar',
        emailDono: 'pablo.aguiar@rumolog.com',
        area: 'MANUTENÇÃO',
        dataUltimaVerificacao: '2024-06-10',
        frequenciaMeses: 12,
        proximaVerificacao: '2025-06-05',
        validacao: 'DENTRO DO PRAZO',
        onePager: '01-04 Supressão de Pó',
        evidencia: '',
        criadoPor: 'Aluisio Fernando de Oliveira Filho',
        modificadoEm: '2024-08-26',
        modificadoPor: 'Victor Dimitri Zolotareff',
        preenchimentoKPI: 'CS337482@rumolog.com;pablo.aguiar@rumolog.com',
        gerenciaRisco: 'Operação',
        topRiskAssociado: 'Risco 01.Não integridade Operacional de Ativos',
        idRiscos: 30,
        criticidade: 'Sim',
    }
];


export const kpiData = {
  compliance: {
    value: 92.5,
    change: 1.2,
  },
  overdueItems: {
    value: 8,
    change: -3,
  },
  criticalRisks: {
    value: 3,
    change: 1,
  },
  controlDeviations: {
    value: 5,
    change: 2,
  },
};

export const complianceChartData = [
  { month: 'Jan', compliance: 88, target: 90 },
  { month: 'Feb', compliance: 91, target: 90 },
  { month: 'Mar', compliance: 92, target: 90 },
  { month: 'Apr', compliance: 89, target: 90 },
  { month: 'May', compliance: 93, target: 90 },
  { month: 'Jun', compliance: 95, target: 90 },
  { month: 'Jul', compliance: 92.5, target: 90 },
];

export const recentActivityData: RecentActivity[] = [
    {
        id: '1',
        user: { name: 'Alice Johnson', avatarUrl: 'https://picsum.photos/seed/101/32/32' },
        action: 'criou um novo risco',
        target: 'Falha no sistema de freios',
        timestamp: '2 horas atrás',
    },
    {
        id: '2',
        user: { name: 'Bob Williams', avatarUrl: 'https://picsum.photos/seed/102/32/32' },
        action: 'atualizou o controle',
        target: 'Inspeção de via semanal',
        timestamp: '5 horas atrás',
    },
    {
        id: '3',
        user: { name: 'Carla Davis', avatarUrl: 'https://picsum.photos/seed/103/32/32' },
        action: 'aprovou o risco',
        target: 'Descarrilamento em pátio',
        timestamp: '1 dia atrás',
    },
    {
        id: '4',
        user: { name: 'David Miller', avatarUrl: 'https://picsum.photos/seed/104/32/32' },
        action: 'comentou no KPI',
        target: '% de conformidade de inspeção',
        timestamp: '2 dias atrás',
    },
];

const riscosBase: Omit<Risk, keyof ReturnType<typeof generateRiskMetrics>>[] = [
  {
    id: 'R001',
    gerencia: 'Operação',
    diretoria: 'Operações Malha Sul',
    processo: 'Manutenção de Via Permanente',
    risco: 'Descarrilamento em Curva',
    descricaoDoRisco: 'Risco de descarrilamento de vagões em curvas de raio reduzido na Malha Sul, especialmente em trechos com histórico de desgaste de trilhos.',
    dataDeIdentificacao: '2023-01-15',
    origemDoRisco: 'Interna',
    causaRaizDoRisco: 'Desgaste excessivo do boleto do trilho combinado com velocidade inadequada do trem.',
    consequenciaDoRisco: 'Danos ao material rodante, à via e à carga, interrupção do tráfego ferroviário e potenciais impactos ambientais.',
    categoriaDoRisco: 'Operacional',
    tipoDeRisco: 'Segurança Operacional',
    processoAfetado: 'Operação Ferroviária',
    probabilidadeInerente: 'Possível',
    impactoInerente: 'Catastrófico',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Inspeção ultrassônica de trilhos para detecção de defeitos e controle de velocidade via ATC (Automatic Train Control).',
    naturezaDoControle: 'Semi-Sistêmico',
    tipoDeControle: 'Preventivo',
    classificacaoDoControle: 'Chave',
    frequencia: 'Semanal',
    eficaciaDoControle: 'Eficaz',
    documentacaoControle: 'DOC-CTRL-001',
    probabilidadeResidual: 'Raro',
    impactoResidual: 'Maior',
    apetiteAoRisco: 'Baixo',
    statusDoRisco: 'Em Tratamento',
    planoDeAcao: 'PA-2024-01',
    responsavelPeloRisco: 'João da Silva',
    dataDaUltimaRevisao: '2024-07-10',
    dataDaProximaRevisao: '2024-10-10',
    kri: 'Taxa de defeitos em trilhos',
    indicadorRisco: 'Aumento de 5% na taxa de defeitos',
    limiteApetite: 10,
    limiteTolerancia: 15,
    limiteCapacidade: 20,
    medicaoAtual: 12,
  },
  {
    id: 'R002',
    gerencia: 'Suprimentos',
    diretoria: 'Logística e Suprimentos',
    processo: 'Gestão de Fornecedores',
    risco: 'Atraso na Entrega de Peças Críticas',
    descricaoDoRisco: 'Atraso na entrega de componentes essenciais (ex: sapatas de freio, rodeiros) por parte de fornecedores, impactando a disponibilidade da frota.',
    dataDeIdentificacao: '2023-02-20',
    origemDoRisco: 'Externa',
    causaRaizDoRisco: 'Problemas logísticos do fornecedor e falta de fornecedores alternativos homologados.',
    consequenciaDoRisco: 'Redução da disponibilidade de locomotivas e vagões, impactando o plano de transporte.',
    categoriaDoRisco: 'Operacional',
    tipoDeRisco: 'Disponibilidade de Ativos',
    processoAfetado: 'Manutenção de Material Rodante',
    probabilidadeInerente: 'Provável',
    impactoInerente: 'Moderado',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Manutenção de estoque de segurança para itens críticos e desenvolvimento de fornecedores alternativos.',
    naturezaDoControle: 'Manual',
    tipoDeControle: 'Corretivo',
    classificacaoDoControle: 'Não Chave',
    frequencia: 'Mensal',
    eficaciaDoControle: 'Pouco Eficaz',
    documentacaoControle: 'DOC-CTRL-002',
    probabilidadeResidual: 'Possível',
    impactoResidual: 'Moderado',
    apetiteAoRisco: 'Médio',
    statusDoRisco: 'Aberto',
    planoDeAcao: 'PA-2024-02',
    responsavelPeloRisco: 'Maria Oliveira',
    dataDaUltimaRevisao: '2024-06-25',
    dataDaProximaRevisao: '2024-09-25',
    kri: 'Nível de estoque de segurança',
    indicadorRisco: 'Estoque abaixo de 30 dias',
    limiteApetite: 30,
    limiteTolerancia: 20,
    limiteCapacidade: 15,
    medicaoAtual: 25,
  },
  {
    id: 'R003',
    gerencia: 'Regulatório',
    diretoria: 'Jurídico e Regulatório',
    processo: 'Conformidade Regulatória',
    risco: 'Alteração em Norma da ANTT',
    descricaoDoRisco: 'Publicação de nova resolução pela Agência Nacional de Transportes Terrestres (ANTT) com requisitos mais rígidos para a sinalização ferroviária.',
    dataDeIdentificacao: '2023-03-10',
    origemDoRisco: 'Externa',
    causaRaizDoRisco: 'Evolução do marco regulatório do setor ferroviário.',
    consequenciaDoRisco: 'Necessidade de investimentos não planejados para adequação da infraestrutura e risco de multas por não conformidade.',
    categoriaDoRisco: 'Legal/Regulatório',
    tipoDeRisco: 'Conformidade',
    processoAfetado: 'Conformidade Regulatória',
    probabilidadeInerente: 'Possível',
    impactoInerente: 'Maior',
    estrategia: 'Aceitar',
    descricaoDoControle: 'Monitoramento contínuo de novas publicações e participação em consultas públicas da ANTT. Criação de um plano de adequação.',
    naturezaDoControle: 'Manual',
    tipoDeControle: 'Detectivo',
    classificacaoDoControle: 'Chave',
    frequencia: 'Diário',
    eficaciaDoControle: 'Eficaz',
    documentacaoControle: 'DOC-CTRL-003',
    probabilidadeResidual: 'Improvável',
    impactoResidual: 'Maior',
    apetiteAoRisco: 'Baixo',
    statusDoRisco: 'Em Tratamento',
    planoDeAcao: 'PA-2024-03',
    responsavelPeloRisco: 'Carlos Pereira',
    dataDaUltimaRevisao: '2024-07-15',
    dataDaProximaRevisao: '2024-08-15',
    kri: 'Aderência a novas normas',
    indicadorRisco: 'Não conformidade identificada',
    limiteApetite: 0,
    limiteTolerancia: 1,
    limiteCapacidade: 2,
    medicaoAtual: 0,
  },
  {
    id: 'R004',
    gerencia: 'Ambiental',
    diretoria: 'Sustentabilidade e Meio Ambiente',
    processo: 'Gestão Ambiental',
    risco: 'Vazamento de Carga Perigosa',
    descricaoDoRisco: 'Vazamento de produto químico (ex: óleo diesel, soda cáustica) durante o transporte, com potencial de contaminação do solo e de corpos hídricos.',
    dataDeIdentificacao: '2023-04-05',
    origemDoRisco: 'Interna',
    causaRaizDoRisco: 'Avaria no tanque do vagão causada por colisão ou fadiga de material.',
    consequenciaDoRisco: 'Dano ambiental significativo, multas dos órgãos ambientais, dano à imagem da companhia e custos de remediação.',
    categoriaDoRisco: 'Ambiental',
    tipoDeRisco: 'Impacto Ambiental',
    processoAfetado: 'Transporte de Cargas',
    probabilidadeInerente: 'Improvável',
    impactoInerente: 'Catastrófico',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Uso de vagões-tanque com certificação e inspeção rigorosa. Plano de Atendimento a Emergências (PAE) com equipes e recursos dedicados.',
    naturezaDoControle: 'Sistêmico',
    tipoDeControle: 'Preventivo',
    classificacaoDoControle: 'Chave',
    frequencia: 'Anual',
    eficaciaDoControle: 'Muito Eficaz',
    documentacaoControle: 'DOC-CTRL-004',
    probabilidadeResidual: 'Raro',
    impactoResidual: 'Maior',
    apetiteAoRisco: 'Muito Baixo',
    statusDoRisco: 'Mitigado',
    planoDeAcao: 'PA-2024-04',
    responsavelPeloRisco: 'Ana Souza',
    dataDaUltimaRevisao: '2024-05-20',
    dataDaProximaRevisao: '2025-05-20',
    kri: 'Número de incidentes com vazamento',
    indicadorRisco: 'Qualquer incidente reportado',
    limiteApetite: 0,
    limiteTolerancia: 0,
    limiteCapacidade: 1,
    medicaoAtual: 0,
  },
  {
    id: 'R005',
    gerencia: 'Tecnologia',
    diretoria: 'Tecnologia da Informação',
    processo: 'Segurança da Informação',
    risco: 'Ataque Cibernético ao CCO',
    descricaoDoRisco: 'Invasão e comprometimento dos sistemas do Centro de Controle Operacional (CCO), afetando a capacidade de controlar a circulação dos trens.',
    dataDeIdentificacao: '2023-05-12',
    origemDoRisco: 'Externa',
    causaRaizDoRisco: 'Exploração de vulnerabilidade de software ou phishing direcionado a funcionários do CCO.',
    consequenciaDoRisco: 'Paralisação total ou parcial da malha ferroviária, risco à segurança operacional e perda de dados confidenciais.',
    categoriaDoRisco: 'Estratégico',
    tipoDeRisco: 'Segurança Cibernética',
    processoAfetado: 'Controle de Tráfego',
    probabilidadeInerente: 'Improvável',
    impactoInerente: 'Catastrófico',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Firewall de nova geração, sistema de detecção de intrusão (IDS/IPS), segregação de redes e programa de conscientização de segurança.',
    naturezaDoControle: 'Sistêmico',
    tipoDeControle: 'Preventivo',
    classificacaoDoControle: 'Chave',
    frequencia: 'Diário',
    eficaciaDoControle: 'Eficaz',
    documentacaoControle: 'DOC-CTRL-005',
    probabilidadeResidual: 'Raro',
    impactoResidual: 'Catastrófico',
    apetiteAoRisco: 'Muito Baixo',
    statusDoRisco: 'Aberto',
    planoDeAcao: 'PA-2024-05',
    responsavelPeloRisco: 'Pedro Martins',
    dataDaUltimaRevisao: '2024-07-01',
    dataDaProximaRevisao: '2024-10-01',
    kri: 'Tentativas de invasão bloqueadas',
    indicadorRisco: 'Aumento de 20% nas tentativas',
    limiteApetite: 100,
    limiteTolerancia: 120,
    limiteCapacidade: 150,
    medicaoAtual: 110,
  },
  {
    id: 'R006',
    gerencia: 'Financeiro',
    diretoria: 'Financeiro e RI',
    processo: 'Gestão de Tesouraria',
    risco: 'Variação Cambial em Contratos',
    descricaoDoRisco: 'Exposição a flutuações cambiais em contratos de fornecimento de equipamentos e peças importadas.',
    dataDeIdentificacao: '2023-06-01',
    origemDoRisco: 'Externa',
    causaRaizDoRisco: 'Volatilidade do mercado de câmbio.',
    consequenciaDoRisco: 'Aumento inesperado dos custos de aquisição e impacto no orçamento de investimentos (CAPEX).',
    categoriaDoRisco: 'Financeiro',
    tipoDeRisco: 'Risco de Mercado',
    processoAfetado: 'Gestão Financeira',
    probabilidadeInerente: 'Provável',
    impactoInerente: 'Maior',
    estrategia: 'Transferir',
    descricaoDoControle: 'Utilização de instrumentos de hedge cambial (Ex: NDF, Opções) para travar a taxa de câmbio em contratos relevantes.',
    naturezaDoControle: 'Sistêmico',
    tipoDeControle: 'Preventivo',
    classificacaoDoControle: 'Chave',
    frequencia: 'Trimestral',
    eficaciaDoControle: 'Muito Eficaz',
    documentacaoControle: 'DOC-CTRL-006',
    probabilidadeResidual: 'Possível',
    impactoResidual: 'Menor',
    apetiteAoRisco: 'Médio',
    statusDoRisco: 'Mitigado',
    planoDeAcao: 'N/A',
    responsavelPeloRisco: 'Fernanda Lima',
    dataDaUltimaRevisao: '2024-06-30',
    dataDaProximaRevisao: '2024-09-30',
    kri: 'Exposição cambial sem hedge',
    indicadorRisco: 'Exposição acima de $1M',
    limiteApetite: 1000000,
    limiteTolerancia: 1500000,
    limiteCapacidade: 2000000,
    medicaoAtual: 800000,
  },
  {
    id: 'R007',
    gerencia: 'RH',
    diretoria: 'Desenvolvimento Humano e Organizacional',
    processo: 'Gestão de Pessoas',
    risco: 'Perda de Profissionais Chave',
    descricaoDoRisco: 'Saída de profissionais com conhecimento técnico especializado e difícil de repor (ex: especialistas em sinalização, maquinistas instrutores).',
    dataDeIdentificacao: '2023-07-22',
    origemDoRisco: 'Interna',
    causaRaizDoRisco: 'Falta de um plano de sucessão estruturado e concorrência do mercado.',
    consequenciaDoRisco: 'Perda de conhecimento crítico, descontinuidade de projetos e sobrecarga das equipes remanescentes.',
    categoriaDoRisco: 'Pessoas',
    tipoDeRisco: 'Gestão de Talentos',
    processoAfetado: 'Gestão de Talentos',
    probabilidadeInerente: 'Possível',
    impactoInerente: 'Moderado',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Implementação de programa de mentoria, mapeamento de sucessão e política de retenção de talentos.',
    naturezaDoControle: 'Manual',
    tipoDeControle: 'Preventivo',
    classificacaoDoControle: 'Não Chave',
    frequencia: 'Anual',
    eficaciaDoControle: 'Pouco Eficaz',
    documentacaoControle: 'DOC-CTRL-007',
    probabilidadeResidual: 'Possível',
    impactoResidual: 'Moderado',
    apetiteAoRisco: 'Alto',
    statusDoRisco: 'Aberto',
    planoDeAcao: 'PA-2024-07',
    responsavelPeloRisco: 'Ricardo Andrade',
    dataDaUltimaRevisao: '2024-07-20',
    dataDaProximaRevisao: '2025-01-20',
    kri: 'Taxa de turnover de talentos-chave',
    indicadorRisco: 'Turnover acima de 10%',
    limiteApetite: 10,
    limiteTolerancia: 15,
    limiteCapacidade: 20,
    medicaoAtual: 12,
  },
  {
    id: 'R008',
    gerencia: 'Jurídico',
    diretoria: 'Jurídico e Regulatório',
    processo: 'Contencioso',
    risco: 'Ações Trabalhistas',
    descricaoDoRisco: 'Aumento do volume de reclamações trabalhistas relacionadas a horas extras e periculosidade.',
    dataDeIdentificacao: '2023-08-15',
    origemDoRisco: 'Interna',
    causaRaizDoRisco: 'Interpretações divergentes da legislação e falhas no registro de ponto.',
    consequenciaDoRisco: 'Aumento do passivo trabalhista, custos com advogados e impacto na imagem de empregador.',
    categoriaDoRisco: 'Legal/Regulatório',
    tipoDeRisco: 'Trabalhista',
    processoAfetado: 'Relações Trabalhistas',
    probabilidadeInerente: 'Provável',
    impactoInerente: 'Menor',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Revisão dos procedimentos de registro de jornada e treinamento das lideranças sobre a legislação.',
    naturezaDoControle: 'Manual',
    tipoDeControle: 'Corretivo',
    classificacaoDoControle: 'Não Chave',
    frequencia: 'Semestral',
    eficaciaDoControle: 'Eficaz',
    documentacaoControle: 'DOC-CTRL-008',
    probabilidadeResidual: 'Possível',
    impactoResidual: 'Menor',
    apetiteAoRisco: 'Médio',
    statusDoRisco: 'Em Tratamento',
    planoDeAcao: 'PA-2024-08',
    responsavelPeloRisco: 'Beatriz Costa',
    dataDaUltimaRevisao: '2024-06-10',
    dataDaProximaRevisao: '2024-12-10',
    kri: 'Número de novas ações trabalhistas',
    indicadorRisco: 'Acima de 5 novas ações/mês',
    limiteApetite: 5,
    limiteTolerancia: 7,
    limiteCapacidade: 10,
    medicaoAtual: 6,
  },
  {
    id: 'R009',
    gerencia: 'Comercial',
    diretoria: 'Comercial e Marketing',
    processo: 'Gestão de Contas',
    risco: 'Perda de Cliente Estratégico',
    descricaoDoRisco: 'Risco de não renovação de contrato com um cliente que representa mais de 15% do faturamento de um corredor logístico.',
    dataDeIdentificacao: '2023-09-01',
    origemDoRisco: 'Externa',
    causaRaizDoRisco: 'Aumento da concorrência com o modal rodoviário e insatisfação com a qualidade do serviço.',
    consequenciaDoRisco: 'Queda abrupta na receita, ociosidade de ativos e impacto no resultado financeiro.',
    categoriaDoRisco: 'Estratégico',
    tipoDeRisco: 'Risco de Mercado',
    processoAfetado: 'Gestão de Clientes',
    probabilidadeInerente: 'Possível',
    impactoInerente: 'Maior',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Plano de relacionamento com o cliente, renegociação de tarifas e apresentação de novos projetos de eficiência.',
    naturezaDoControle: 'Manual',
    tipoDeControle: 'Preventivo',
    classificacaoDoControle: 'Chave',
    frequencia: 'Mensal',
    eficaciaDoControle: 'Eficaz',
    documentacaoControle: 'DOC-CTRL-009',
    probabilidadeResidual: 'Improvável',
    impactoResidual: 'Maior',
    apetiteAoRisco: 'Baixo',
    statusDoRisco: 'Mitigado',
    planoDeAcao: 'N/A',
    responsavelPeloRisco: 'Lucas Ferreira',
    dataDaUltimaRevisao: '2024-07-25',
    dataDaProximaRevisao: '2024-08-25',
    kri: 'NPS do cliente',
    indicadorRisco: 'NPS abaixo de 7',
    limiteApetite: 8,
    limiteTolerancia: 7,
    limiteCapacidade: 6,
    medicaoAtual: 7.5,
  },
  {
    id: 'R010',
    gerencia: 'SMS',
    diretoria: 'Saúde, Meio Ambiente e Segurança',
    processo: 'Segurança Operacional',
    risco: 'Acidente com Passagem em Nível',
    descricaoDoRisco: 'Colisão de trem com veículo rodoviário em passagem em nível (PN) não sinalizada ou com falha de sinalização.',
    dataDeIdentificacao: '2023-10-11',
    origemDoRisco: 'Interna',
    causaRaizDoRisco: 'Imprudência de motoristas e falta de cancelas em PNs de alto fluxo.',
    consequenciaDoRisco: 'Vítimas fatais, danos materiais, interrupção da via e forte impacto negativo na imagem da empresa.',
    categoriaDoRisco: 'Operacional',
    tipoDeRisco: 'Segurança Operacional',
    processoAfetado: 'Segurança Operacional',
    probabilidadeInerente: 'Possível',
    impactoInerente: 'Catastrófico',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Campanhas de conscientização para motoristas e instalação de novas PNs com cancela e sinalização ativa.',
    naturezaDoControle: 'Semi-Sistêmico',
    tipoDeControle: 'Preventivo',
    classificacaoDoControle: 'Chave',
    frequencia: 'Anual',
    eficaciaDoControle: 'Eficaz',
    documentacaoControle: 'DOC-CTRL-010',
    probabilidadeResidual: 'Improvável',
    impactoResidual: 'Catastrófico',
    apetiteAoRisco: 'Muito Baixo',
    statusDoRisco: 'Em Tratamento',
    planoDeAcao: 'PA-2024-10',
    responsavelPeloRisco: 'Sofia Ribeiro',
    dataDaUltimaRevisao: '2024-04-15',
    dataDaProximaRevisao: '2024-10-15',
    kri: 'Número de acidentes em PNs',
    indicadorRisco: 'Qualquer acidente',
    limiteApetite: 0,
    limiteTolerancia: 1,
    limiteCapacidade: 2,
    medicaoAtual: 1,
  },
  {
    id: 'R011',
    gerencia: 'Expansão',
    diretoria: 'Novos Negócios e Expansão',
    processo: 'Licenciamento de Projetos',
    risco: 'Atraso na Obtenção de Licença Ambiental',
    descricaoDoRisco: 'Demora na emissão da Licença de Instalação (LI) para um novo trecho ferroviário, atrasando o início das obras.',
    dataDeIdentificacao: '2023-11-05',
    origemDoRisco: 'Externa',
    causaRaizDoRisco: 'Burocracia do órgão ambiental e questionamentos de comunidades locais.',
    consequenciaDoRisco: 'Atraso no cronograma do projeto, aumento dos custos e postergação da geração de receita.',
    categoriaDoRisco: 'Estratégico',
    tipoDeRisco: 'Execução de Projeto',
    processoAfetado: 'Projetos de Expansão',
    probabilidadeInerente: 'Provável',
    impactoInerente: 'Maior',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Contratação de consultoria especializada e engajamento proativo com o órgão ambiental e as comunidades.',
    naturezaDoControle: 'Manual',
    tipoDeControle: 'Preventivo',
    classificacaoDoControle: 'Chave',
    frequencia: 'Semanal',
    eficaciaDoControle: 'Eficaz',
    documentacaoControle: 'DOC-CTRL-011',
    probabilidadeResidual: 'Possível',
    impactoResidual: 'Maior',
    apetiteAoRisco: 'Médio',
    statusDoRisco: 'Aberto',
    planoDeAcao: 'PA-2024-11',
    responsavelPeloRisco: 'Daniel Almeida',
    dataDaUltimaRevisao: '2024-07-22',
    dataDaProximaRevisao: '2024-08-22',
    kri: 'Prazo para obtenção de licença',
    indicadorRisco: 'Atraso superior a 60 dias',
    limiteApetite: 30,
    limiteTolerancia: 60,
    limiteCapacidade: 90,
    medicaoAtual: 45,
  },
  {
    id: 'R012',
    gerencia: 'Operação',
    diretoria: 'Operações Malha Norte',
    processo: 'Manutenção de Via Permanente',
    risco: 'Furto de Cabos de Sinalização',
    descricaoDoRisco: 'Furto recorrente de cabos de cobre do sistema de sinalização, causando falhas nos sinais e interrupção do tráfego.',
    dataDeIdentificacao: '2023-12-01',
    origemDoRisco: 'Externa',
    causaRaizDoRisco: 'Ação de criminosos e vulnerabilidade da infraestrutura em trechos isolados.',
    consequenciaDoRisco: 'Atrasos na operação, risco de acidentes e custos elevados de reposição e manutenção.',
    categoriaDoRisco: 'Operacional',
    tipoDeRisco: 'Segurança Patrimonial',
    processoAfetado: 'Manutenção de Via Permanente',
    probabilidadeInerente: 'Quase Certo',
    impactoInerente: 'Moderado',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Vigilância motorizada nos trechos mais críticos e substituição de cabos de cobre por fibra óptica ou alumínio.',
    naturezaDoControle: 'Semi-Sistêmico',
    tipoDeControle: 'Corretivo',
    classificacaoDoControle: 'Não Chave',
    frequencia: 'Diário',
    eficaciaDoControle: 'Pouco Eficaz',
    documentacaoControle: 'DOC-CTRL-012',
    probabilidadeResidual: 'Provável',
    impactoResidual: 'Moderado',
    apetiteAoRisco: 'Alto',
    statusDoRisco: 'Aberto',
    planoDeAcao: 'PA-2024-12',
    responsavelPeloRisco: 'Juliana Santos',
    dataDaUltimaRevisao: '2024-07-18',
    dataDaProximaRevisao: '2024-08-18',
    kri: 'Número de ocorrências de furto',
    indicadorRisco: 'Acima de 10 ocorrências/mês',
    limiteApetite: 5,
    limiteTolerancia: 10,
    limiteCapacidade: 15,
    medicaoAtual: 12,
  },
  {
    id: 'R013',
    gerencia: 'Compliance',
    diretoria: 'Jurídico e Regulatório',
    processo: 'Relações com Terceiros',
    risco: 'Violação da Lei Anticorrupção',
    descricaoDoRisco: 'Envolvimento, direto ou indireto, em atos de corrupção em negociações com o poder público para obtenção de licenças ou contratos.',
    dataDeIdentificacao: '2024-01-20',
    origemDoRisco: 'Interna',
    causaRaizDoRisco: 'Falha nos controles de compliance e pressão por resultados.',
    consequenciaDoRisco: 'Pesadas multas, sanções legais, danos irreparáveis à reputação da empresa e prisão de executivos.',
    categoriaDoRisco: 'Legal/Regulatório',
    tipoDeRisco: 'Compliance',
    processoAfetado: 'Relações Institucionais',
    probabilidadeInerente: 'Raro',
    impactoInerente: 'Catastrófico',
    estrategia: 'Evitar',
    descricaoDoControle: 'Programa de compliance robusto, com treinamentos obrigatórios, canal de denúncias independente e due diligence de terceiros.',
    naturezaDoControle: 'Manual',
    tipoDeControle: 'Preventivo',
    classificacaoDoControle: 'Chave',
    frequencia: 'Anual',
    eficaciaDoControle: 'Muito Eficaz',
    documentacaoControle: 'DOC-CTRL-013',
    probabilidadeResidual: 'Raro',
    impactoResidual: 'Menor',
    apetiteAoRisco: 'Muito Baixo',
    statusDoRisco: 'Fechado',
    planoDeAcao: 'N/A',
    responsavelPeloRisco: 'Marcos Mendes',
    dataDaUltimaRevisao: '2024-01-20',
    dataDaProximaRevisao: '2025-01-20',
    kri: 'Denúncias de corrupção',
    indicadorRisco: 'Qualquer denúncia procedente',
    limiteApetite: 0,
    limiteTolerancia: 0,
    limiteCapacidade: 0,
    medicaoAtual: 0,
  },
  {
    id: 'R014',
    gerencia: 'Tecnologia',
    diretoria: 'Tecnologia da Informação',
    processo: 'Operação de TI',
    risco: 'Indisponibilidade de Sistema Crítico',
    descricaoDoRisco: 'Falha no sistema de gestão de transporte (TMS), impedindo o planejamento e a execução das viagens.',
    dataDeIdentificacao: '2024-02-15',
    origemDoRisco: 'Interna',
    causaRaizDoRisco: 'Falha de hardware no data center ou bug de software após atualização.',
    consequenciaDoRisco: 'Incapacidade de gerar planos de transporte, resultando em atrasos e ineficiência operacional.',
    categoriaDoRisco: 'Operacional',
    tipoDeRisco: 'Disponibilidade de Sistemas',
    processoAfetado: 'Planejamento de Transporte',
    probabilidadeInerente: 'Improvável',
    impactoInerente: 'Maior',
    estrategia: 'Mitigar',
    descricaoDoControle: 'Ambiente de data center redundante e plano de recuperação de desastres (DRP) testado periodicamente.',
    naturezaDoControle: 'Sistêmico',
    tipoDeControle: 'Corretivo',
    classificacaoDoControle: 'Chave',
    frequencia: 'Semestral',
    eficaciaDoControle: 'Eficaz',
    documentacaoControle: 'DOC-CTRL-014',
    probabilidadeResidual: 'Raro',
    impactoResidual: 'Moderado',
    apetiteAoRisco: 'Baixo',
    statusDoRisco: 'Mitigado',
    planoDeAcao: 'N/A',
    responsavelPeloRisco: 'Vanessa Rocha',
    dataDaUltimaRevisao: '2024-03-10',
    dataDaProximaRevisao: '2024-09-10',
    kri: 'Tempo de indisponibilidade do TMS',
    indicadorRisco: 'Indisponibilidade > 1 hora',
    limiteApetite: 60,
    limiteTolerancia: 90,
    limiteCapacidade: 120,
    medicaoAtual: 30,
  },
  {
    id: 'R015',
    gerencia: 'Comercial',
    diretoria: 'Comunicação e Marketing',
    processo: 'Gestão de Imagem',
    risco: 'Imagem Prejudicada por Mídia Social',
    descricaoDoRisco: 'Viralização de conteúdo negativo nas redes sociais (ex: vídeo de acidente, reclamação de cliente) com grande repercussão.',
    dataDeIdentificacao: '2024-03-05',
    origemDoRisco: 'Externa',
    causaRaizDoRisco: 'Insatisfação do cliente ou incidente operacional tornado público.',
    consequenciaDoRisco: 'Dano à imagem e reputação da marca, com potencial impacto nas relações com investidores e clientes.',
    categoriaDoRisco: 'Imagem',
    tipoDeRisco: 'Reputação',
    processoAfetado: 'Comunicação Corporativa',
    probabilidadeInerente: 'Possível',
    impactoInerente: 'Moderado',
    estrategia: 'Aceitar',
    descricaoDoControle: 'Monitoramento de mídias sociais e plano de gerenciamento de crises de imagem, com porta-vozes definidos e Q&A preparado.',
    naturezaDoControle: 'Manual',
    tipoDeControle: 'Detectivo',
    classificacaoDoControle: 'Não Chave',
    frequencia: 'Diário',
    eficaciaDoControle: 'Eficaz',
    documentacaoControle: 'DOC-CTRL-015',
    probabilidadeResidual: 'Possível',
    impactoResidual: 'Menor',
    apetiteAoRisco: 'Médio',
    statusDoRisco: 'Em Tratamento',
    planoDeAcao: 'PA-2024-15',
    responsavelPeloRisco: 'Gustavo Paes',
    dataDaUltimaRevisao: '2024-07-28',
    dataDaProximaRevisao: '2024-08-28',
    kri: 'Sentimento de menções à marca',
    indicadorRisco: 'Sentimento negativo > 30%',
    limiteApetite: 20,
    limiteTolerancia: 30,
    limiteCapacidade: 40,
    medicaoAtual: 25,
  }
];

const probabilityMap = { 'Raro': 1, 'Improvável': 2, 'Possível': 3, 'Provável': 4, 'Quase Certo': 5 };
const impactMap = { 'Insignificante': 1, 'Menor': 2, 'Moderado': 3, 'Maior': 4, 'Catastrófico': 5 };
const riskLevelMap = [
    ["Baixo", "Baixo", "Médio", "Médio", "Alto"],
    ["Baixo", "Médio", "Médio", "Alto", "Alto"],
    ["Médio", "Médio", "Alto", "Alto", "Crítico"],
    ["Médio", "Alto", "Alto", "Crítico", "Crítico"],
    ["Alto", "Alto", "Crítico", "Crítico", "Extremo"]
];

const generateRiskMetrics = (prob: Risk['probabilidadeInerente'], impact: Risk['impactoInerente']) => {
    const probValue = probabilityMap[prob] || 0;
    const impactValue = impactMap[impact] || 0;

    let nivelDeRiscoInerente: Risk['nivelDeRiscoInerente'] = 'Baixo';

    if (probValue > 0 && impactValue > 0) {
        nivelDeRiscoInerente = riskLevelMap[probValue - 1][impactValue - 1] as Risk['nivelDeRiscoInerente'];
    }

    const custoDoRisco = probValue * impactValue * 10000;
    const beneficioDoControle = custoDoRisco * 0.75;
    const valorExposto = custoDoRisco - beneficioDoControle;

    return {
        nivelDeRiscoInerente,
        nivelDeRiscoResidual: riskLevelMap[probabilityMap[prob] - 2]?.[impactMap[impact] - 2] || 'Baixo',
        custoDoRisco,
        beneficioDoControle,
        valorExposto
    };
};

export const risksData: Risk[] = riscosBase.map(risk => {
    const metrics = generateRiskMetrics(risk.probabilidadeInerente, risk.impactoInerente);
    return {
        ...risk,
        ...metrics
    };
});


const getStatusCounts = (risks: Risk[]) => {
  const counts: { [key: string]: number } = {
    'Aberto': 0,
    'Em Tratamento': 0,
    'Fechado': 0,
    'Mitigado': 0,
  };
  risks.forEach(risk => {
    const status = risk.statusDoRisco;
    if (counts.hasOwnProperty(status)) {
      counts[status]++;
    }
  });
  return counts;
};

const statusCounts = getStatusCounts(risksData);

export const statusBreakdownChartData = [
  { name: 'Aberto', value: statusCounts['Aberto'], fill: 'hsl(var(--chart-2))' },
  { name: 'Em Tratamento', value: statusCounts['Em Tratamento'], fill: 'hsl(var(--chart-1))' },
  { name: 'Mitigado', value: statusCounts['Mitigado'], fill: 'hsl(var(--chart-3))' },
  { name: 'Fechado', value: statusCounts['Fechado'], fill: 'hsl(var(--muted-foreground))' },
];

export const initialBowtieData: BowtieData[] = [
    {
        id: 'B001',
        riskId: 'R001',
        topEvent: {
            title: "Descarrilamento em Curva",
            description: "Operação Ferroviária"
        },
        threats: [
            { 
                id: 'T1', 
                title: 'Desgaste excessivo do trilho',
                barriers: [
                    { id: 'B1-1', title: 'Inspeção ultrassônica', responsible: 'Operação', effectiveness: 'Eficaz', status: 'Implementado' },
                ]
            },
            { 
                id: 'T2', 
                title: 'Velocidade inadequada do trem',
                barriers: [
                    { id: 'B2-1', title: 'Controle de velocidade via ATC', responsible: 'CCO', effectiveness: 'Eficaz', status: 'Implementado' },
                ]
            }
        ],
        consequences: [
            {
                id: 'C1',
                title: 'Danos ao material rodante e à via',
                barriers: [
                    { id: 'B3-1', title: 'Plano de Ação Corretiva', responsible: 'Manutenção', effectiveness: 'Eficaz', status: 'Implementado' },
                ]
            },
            {
                id: 'C2',
                title: 'Interrupção do tráfego ferroviário',
                barriers: [
                    { id: 'B4-1', title: 'Plano de contingência operacional', responsible: 'CCO', effectiveness: 'Pouco Eficaz', status: 'Pendente' },
                ]
            }
        ]
    }
];

export const getEmptyBowtie = (risk?: Risk): BowtieData => {
    const newId = `B${Math.random().toString(36).substr(2, 9)}`;
    const newThreat: BowtieThreat = {
        id: 'T1',
        title: 'Nova Ameaça',
        barriers: [{
            id: 'B1-1',
            title: 'Nova Barreira Preventiva',
            responsible: 'Indefinido',
            effectiveness: 'Eficaz',
            status: 'Pendente'
        }]
    };
     const newConsequence: BowtieConsequence = {
        id: 'C1',
        title: 'Nova Consequência',
        barriers: [{
            id: 'B2-1',
            title: 'Nova Barreira Mitigatória',
            responsible: 'Indefinido',
            effectiveness: 'Eficaz',
            status: 'Pendente'
        }]
    };

    if (!risk) {
        return {
            id: newId,
            riskId: `R-GENERIC-${newId}`,
            topEvent: {
                title: 'Novo Evento de Topo',
                description: 'Descreva o processo',
            },
            threats: [newThreat],
            consequences: [newConsequence],
        };
    }

    return {
        id: newId,
        riskId: risk.id,
        topEvent: {
            title: risk.risco,
            description: risk.processoAfetado,
        },
        threats: [newThreat],
        consequences: [newConsequence],
    };
};
